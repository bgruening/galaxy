define("mvc/grid/grid-template",["exports","utils/utils"],function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(e);t.default={grid:function(t){var e="";return e=t.embedded?this.grid_header(t)+this.grid_table(t):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'+this.grid_header(t)+'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>'+this.grid_table(t),t.info_text&&(e+='<br><div class="toolParamHelp" style="clear: both;">'+t.info_text+"</div>"),e},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(t){var e='<div class="grid-header">';if(t.embedded||(e+="<h2>"+t.title+"</h2>"),t.global_actions){e+='<ul class="manage-table-actions">';var a=t.global_actions.length>=3;a&&(e+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var r=!0,l=!1,i=void 0;try{for(var n,o=t.global_actions[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var s=n.value;e+='<li><a class="action-button use-target" target="'+s.target+'" href="'+s.url_args+'" onclick="return false;" >'+s.label+"</a></li>"}}catch(t){l=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(l)throw i}}a&&(e+="</div>"),e+="</ul>"}return t.insert&&(e+=t.insert),e+=this.grid_filters(t),e+="</div>"},header:function(t){var e="<tr>";t.show_item_checkboxes&&(e+="<th>",t.items.length>0&&(e+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),e+="</th>");var a=!0,r=!1,l=void 0;try{for(var i,n=t.columns[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var o=i.value;o.visible&&(e+='<th id="'+o.key+'-header">',o.href?e+='<a href="'+o.href+'" class="sort-link" sort_key="'+o.key+'">'+o.label+"</a>":e+=o.label,e+='<span class="sort-arrow">'+o.extra+"</span></th>")}}catch(t){r=!0,l=t}finally{try{!a&&n.return&&n.return()}finally{if(r)throw l}}return e+="</tr>"},body:function(t){var e="";0===t.items.length&&(e+='<tr><td colspan="100"><em>No Items</em></td></tr>');var a=!0,r=!1,l=void 0;try{for(var i,n=t.items[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var o=i.value;e+="<tr ",t.current_item_id==o.id&&(e+='class="current"'),e+=">",t.show_item_checkboxes&&(e+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'+o.encode_id+'" id="'+o.encode_id+'" class="grid-row-select-checkbox" /></td>');var s=!0,d=!1,c=void 0;try{for(var f,u=t.columns[Symbol.iterator]();!(s=(f=u.next()).done);s=!0){var p=f.value;if(p.visible){var v="";p.nowrap&&(v='style="white-space:nowrap;"');var g=o.column_config[p.label],h=g.link,b=g.value,y=g.target;"string"===jQuery.type(b)&&(b=b.replace(/\/\//g,"/"));var m="",_="";p.attach_popup&&(m="grid-"+o.encode_id+"-popup",_="menubutton",""!==h&&(_+=" split"),_+=" popup"),e+="<td "+v+">",h?(0!==t.operations.length&&(e+='<div id="'+m+'" class="'+_+'" style="float: left;">'),e+='<a class="menubutton-label use-target" target="'+y+'" href="'+h+'" onclick="return false;">'+b+"</a>",0!==t.operations.length&&(e+="</div>")):e+='<div id="'+m+'" class="'+_+'"><label id="'+p.label_id_prefix+o.encode_id+'" for="'+o.encode_id+'">'+(b||"")+"</label></div>",e+="</td>"}}}catch(t){d=!0,c=t}finally{try{!s&&u.return&&u.return()}finally{if(d)throw c}}e+="</tr>"}}catch(t){r=!0,l=t}finally{try{!a&&n.return&&n.return()}finally{if(r)throw l}}return e},footer:function(t){var e="";if(t.use_paging&&t.num_pages>1){var a=t.num_page_links,r=t.cur_page_num,l=t.num_pages,i=a/2,n=r-i,o=0;n<=0&&(o=i-(r-(n=1)));var s,d=i+o,c=r+d;0!==(s=c<=l?0:d-((c=l)+1-r))&&(n-=s)<1&&(n=1),e+='<tr id="page-links-row">',t.show_item_checkboxes&&(e+="<td></td>"),e+='<td colspan="100"><span id="page-link-container">Page:',n>1&&(e+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var f=n;f<c+1;f++)f==t.cur_page_num?e+='<span class="page-link inactive-link" id="page-link-'+f+'">'+f+"</span>":e+='<span class="page-link" id="page-link-'+f+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+f+'">'+f+"</a></span>";c<l&&(e+='...<span class="page-link" id="page-link-'+l+'"><a href="javascript:void(0);" onclick="return false;" page_num="'+l+'">'+l+"</a></span>"),e+="</span>",e+='\n                    <span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                    </td>\n                </tr>'}if(t.show_item_checkboxes){e+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var u=!0,p=!1,v=void 0;try{for(var g,h=t.operations[Symbol.iterator]();!(u=(g=h.next()).done);u=!0){var b=g.value;b.allow_multiple&&(e+='<input type="button" value="'+b.label+'" class="operation-button action-button">&nbsp;')}}catch(t){p=!0,v=t}finally{try{!u&&h.return&&h.return()}finally{if(p)throw v}}e+="</td></tr>"}var y=!1,m=!0,_=!1,k=void 0;try{for(var x,w=t.operations[Symbol.iterator]();!(m=(x=w.next()).done);m=!0)if(x.value.global_operation){y=!0;break}}catch(t){_=!0,k=t}finally{try{!m&&w.return&&w.return()}finally{if(_)throw k}}if(y){e+='<tr><td colspan="100">';var S=!0,j=!1,A=void 0;try{for(var C,O=t.operations[Symbol.iterator]();!(S=(C=O.next()).done);S=!0){var P=C.value;P.global_operation&&(e+='<a class="action-button" href="'+P.global_operation+'">'+P.label+"</a>")}}catch(t){j=!0,A=t}finally{try{!S&&O.return&&O.return()}finally{if(j)throw A}}e+="</td></tr>"}return t.legend&&(e+='<tr><td colspan="100">'+t.legend+"</td></tr>"),e},message:function(t){var e=t.status;return-1!=["success","ok"].indexOf(e)&&(e="done"),'<p><div class="'+e+'message transient-message">'+_.escape(t.message)+'</div><div style="clear: both"></div></p>'},grid_filters:function(t){var e=t.default_filter_dict,a=t.filters,r="none";t.advanced_search&&(r="block");var l=!1,i=!0,n=!1,o=void 0;try{for(var s,d=t.columns[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value;if("advanced"==c.filterable){var f=c.key,u=a[f],p=e[f];u&&p&&u!=p&&(r="block"),l=!0}}}catch(t){n=!0,o=t}finally{try{!i&&d.return&&d.return()}finally{if(n)throw o}}var v="block";"block"==r&&(v="none");var g='<div id="standard-search" style="display: '+v+';"><table><tr><td style="padding: 0;"><table>',h=!0,b=!1,y=void 0;try{for(var m,_=t.columns[Symbol.iterator]();!(h=(m=_.next()).done);h=!0){var k=m.value;"standard"==k.filterable&&(g+=this.grid_column_filter(t,k))}}catch(t){b=!0,y=t}finally{try{!h&&_.return&&_.return()}finally{if(b)throw y}}g+="</table></td></tr><tr><td>",l&&(g+='<a href="" class="advanced-search-toggle">Advanced Search</a>'),g+="</td></tr></table></div>",g+='<div id="advanced-search" style="display: '+r+'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="" class="advanced-search-toggle">Close Advanced Search</a></td></tr>';var x=!0,w=!1,S=void 0;try{for(var j,A=t.columns[Symbol.iterator]();!(x=(j=A.next()).done);x=!0){var C=j.value;"advanced"==C.filterable&&(g+=this.grid_column_filter(t,C))}}catch(t){w=!0,S=t}finally{try{!x&&A.return&&A.return()}finally{if(w)throw S}}return g+="</table></div>"},grid_column_filter:function(t,e){var a=t.filters,r=e.label,l=e.key;"advanced"==e.filterable&&(r=r.toLowerCase());var i="<tr>";if("advanced"==e.filterable&&(i+='<td align="left" style="padding-left: 10px">'+r+":</td>"),i+='<td style="padding-bottom: 1px;">',e.is_text){i+='<form class="text-filter-form" column_key="'+l+'" action="'+t.url+'" method="get" >';var n=!0,o=!1,s=void 0;try{for(var d,c=t.columns[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){var f=d.value,u=a[f.key];u&&"All"!=u&&(f.is_text&&(u=JSON.stringify(u)),i+='<input type="hidden" id="'+f.key+'" name="f-'+f.key+'" value="'+u+'"/>')}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}i+='<span id="'+l+'-filtering-criteria">';var p=a[l];if(p){var v=jQuery.type(p);if("string"==v&&"All"!=p&&(i+=this.filter_element(l,p)),"array"==v)for(var g in p){var h=p;h=h.slice(g),i+=this.filter_element(l,p[g])}}i+="</span>";var b="",y=20;"standard"==e.filterable&&((b=e.label.toLowerCase()).length<20&&(y=b.length),y+=4),i+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'+l+'-filter" name="f-'+l+'" type="text" placeholder="'+b+'" size="'+y+'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>'}else{i+='<span id="'+l+'-filtering-criteria">';var m=!1;for(var _ in t.categorical_filters[l]){var k=t.categorical_filters[l][_],x="",w="";for(var S in k)x=S,w=k[S];m&&(i+=" | "),m=!0;var j=a[l];j&&k[l]&&j==w?i+='<span class="categorical-filter '+l+'-filter current-filter">'+_+"</span>":i+='<span class="categorical-filter '+l+'-filter"><a href="javascript:void(0);" filter_key="'+x+'" filter_val="'+w+'">'+_+"</a></span>"}i+="</span>"}return i+="</td></tr>"},filter_element:function(t,e){return'<span class="text-filter-val">'+(e=a.default.sanitize(e))+'<a href="javascript:void(0);" filter_key="'+t+'" filter_val="'+e+'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>'}}});