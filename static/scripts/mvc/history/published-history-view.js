define([],function(){var a=Backbone.View.extend({initialize:function(){this.setElement("<div/>"),this.render()},render:function(){var a=this,b=3;$.getJSON(Galaxy.root+"api/histories/published/",function(c){a.$el.empty().append(a._templateHeader());var d=[],e=null;_.each(c,function(a){_.each(a.tags,function(a){_.contains(d,a)||d.push(a)})}),e=a.$el.find(".published-histories"),e.append(a._templateTagsTableActionButtons()),e.append(a._templateHistoryTagsTable(a,d)),a.register_tag_click(a,d,c),a.filter_items(a,a.$el.find(".search-tags-input"),a.$el.find(".search-tags-tbody tr"),b)})},register_tag_click:function(a,b,c){_.each(b,function(b){var d=a.$el.find(".published-histories");d.find(".history-tag-"+b).click(function(e){e.preventDefault();var f=a._templatePublishedHistoryTable(a,c,b),g=d.find(".tr-"+b),h=d.find(".tr-"+b+" td");h.empty().append(f),"none"===g.css("display")?g.show():g.hide()})})},filter_items:function(a,b,c,d){b.on("keyup",function(){var a=$(this).val();if(a.length>=d){var b=new RegExp(a,"i");c.hide(),c.filter(function(){return b.test($(this).text())}).show()}else c.show()})},_templateHeader:function(){return'<div class="page-container"><div class="published-histories"><h2>Published Histories</h2></div></div>'},_templateHistoryTagsTable:function(a,b){var c="",d="";return c+='<table class="table colored"><thead><tr class="header"><th>Tag names</th></tr></thead>',_.each(b,function(a){d=d+'<tr><td> <a class="history-tag-'+a+'" href="#">'+a+'</a></td></tr><tr class="tr-'+a+' published-history-tr"><td></td></tr>'}),c+'<tbody class="search-tags-tbody">'+d+"</tbody></table>"},_templateTagsTableActionButtons:function(){return'<ul class="manage-table-actions"><li><input class="search-tags-input form-control" type="text" autocomplete="off" placeholder="search for tags..."></li></ul>'},_templatePublishedHistoryTable:function(a,b,c){var d="",e="";return d+='<table class="table colored"><thead><tr class="header"><th>Name</th></tr></thead>',_.each(b,function(a){_.contains(a.tags,c)&&(e=e+"<tr><td>"+a.name+"</td></tr>")}),d+'<tbody class="history_item-search">'+e+"</tbody></table>"}});return{View:a}});
//# sourceMappingURL=../../../maps/mvc/history/published-history-view.js.map