webpackJsonp([3],{140:function(e,t,o){"use strict";(function(e,t){function i(e){return e&&e.__esModule?e:{default:e}}var n=o(0),r=i(n),s=o(24),a=i(s),l=o(3),c=i(l),p=o(27),g=i(p),u=r.default;window.app=function(o,i){window.Galaxy=new a.default.GalaxyApp(o,i),Galaxy.debug("login app");var n=encodeURI(o.redirect);if(!o.show_welcome_with_login){var s=r.default.param({use_panels:"True",redirect:n});return void(window.location.href=Galaxy.root+"user/login?"+s)}var l=e.View.extend({initialize:function(t){this.page=t,this.model=new e.Model({title:(0,c.default)("Login required")}),this.setElement(this._template())},render:function(){this.page.$("#galaxy_main").prop("src",o.welcome_url)},_template:function(){return'<iframe src="'+o.root+"user/login?"+u.param({redirect:n})+'" frameborder="0" style="width: 100%; height: 100%;"/>'}});u(function(){Galaxy.page=new g.default.View(t.extend(o,{Right:l}))})}}).call(t,o(2),o(1))},24:function(e,t,o){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function r(e,t){return this._init(e||{},t||{})}Object.defineProperty(t,"__esModule",{value:!0});var s=o(1),a=n(s),l=o(2),c=n(l),p=o(5),g=i(p),u=o(25),d=i(u),f=o(26),h=i(f),y=o(33),m=i(y),_=o(3),v=i(_);(0,m.default)(r,"GalaxyApp");var b="galaxy:debug:namespaces",x=!1;try{x="true"==localStorage.getItem("galaxy:debug")}catch(e){console.log((0,v.default)("localStorage not available for debug flag retrieval"))}r.prototype._init=function(e,t){var o=this;return a.extend(o,c.Events),x&&(o.logger=console,console.debug("debugging galaxy:","options:",e,"bootstrapped:",t)),o._processOptions(e),o.root=e.root||"/",o.params=e.params||{},o.session_csrf_token=e.session_csrf_token||null,o._initConfig(e.config||{}),o._patchGalaxy(window.Galaxy),o._initLogger(o.options.loggerOptions||{}),o.debug("GalaxyApp.options: ",o.options),o.debug("GalaxyApp.config: ",o.config),o.debug("GalaxyApp.logger: ",o.logger),o._initLocale(),o.debug("GalaxyApp.localize: ",o.localize),o.config=e.config||{},o.debug("GalaxyApp.config: ",o.config),o._initUser(e.user||{}),o.debug("GalaxyApp.user: ",o.user),o._setUpListeners(),o.trigger("ready",o),o},r.prototype.defaultOptions={patchExisting:!0,root:"/",session_csrf_token:null},r.prototype._processOptions=function(e){var t=this,o=t.defaultOptions;t.options={};for(var i in o)o.hasOwnProperty(i)&&(t.options[i]=e.hasOwnProperty(i)?e[i]:o[i]);return t},r.prototype._initConfig=function(e){var t=this;return t.config=e,t.config.debug=x||t.config.debug,t},r.prototype._patchGalaxy=function(e){var t=this;if(t.options.patchExisting&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},r.prototype._initLogger=function(e){var t=this;if(t.config.debug){e.consoleLogger=e.consoleLogger||console,e.consoleLevel=e.consoleLevel||h.default.MetricsLogger.ALL;try{e.consoleNamespaceWhitelist=localStorage.getItem(b).split(",")}catch(e){}try{e.consoleFlattenMessages="true"==localStorage.getItem("galaxy:debug:flatten")}catch(e){}console.log(e.consoleFlattenMessages)}return t.logger=new h.default.MetricsLogger(e),t.emit={},["log","debug","info","warn","error","metric"].map(function(e){t.emit[e]=function(o){t.logger.emit(e,arguments[0],Array.prototype.slice.call(arguments,1))}}),t.config.debug&&(g.default.LoggableMixin.logger=t.logger),t},r.prototype._initLocale=function(e){var t=this;return t.debug("_initLocale:",e),t.localize=v.default,window._l=t.localize,t},r.prototype._initUser=function(e){var t=this;return t.debug("_initUser:",e),t.user=new d.default.User(e),t.user.logger=t.logger,t},r.prototype._setUpListeners=function(){var t=this;return t.lastAjax={},e(document).bind("ajaxSend",function(e,o,i){var n=i.data;try{n=JSON.parse(n)}catch(e){}t.lastAjax={url:location.href.slice(0,-1)+i.url,data:n}}),t},r.prototype.debugging=function(e){var t=this;try{if(void 0===e)return"true"===localStorage.getItem("galaxy:debug");if(e)return localStorage.setItem("galaxy:debug",!0),!0;localStorage.removeItem("galaxy:debug"),t.debuggingNamespaces(null)}catch(e){console.log((0,v.default)("localStorage not available for debug flag retrieval"))}return!1},r.prototype.debuggingNamespaces=function(e){var t=this;try{if(void 0===e){var o=localStorage.getItem(b);return"string"==typeof o?o.split(","):[]}null===e?localStorage.removeItem(b):localStorage.setItem(b,e);var i=t.debuggingNamespaces();return t.logger&&(t.logger.options.consoleNamespaceWhitelist=i),i}catch(e){console.log((0,v.default)("localStorage not available for debug namespace retrieval"))}},r.prototype.toString=function(){return"GalaxyApp("+(this.user?this.user.get("email")||"(anonymous)":"uninitialized")+")"},t.default={GalaxyApp:r}}).call(t,o(0))},26:function(e,t,o){"use strict";(function(e){function o(e){e=e||{};var t=this;return t.userId=window.bootstrapped&&window.bootstrapped.user?window.bootstrapped.user.id:null,t.userId=t.userId||e.userId||null,t.consoleLogger=e.consoleLogger||null,t._init(e),t}function i(e){var t=String(e);return"[object Object]"==t&&(t=JSON.stringify(e)),t}function n(e){return this._init(e||{})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.ALL=0,o.LOG=0,o.DEBUG=10,o.INFO=20,o.WARN=30,o.ERROR=40,o.METRIC=50,o.NONE=100,o.defaultOptions={logLevel:o.NONE,consoleLevel:o.NONE,defaultNamespace:"Galaxy",consoleNamespaceWhitelist:null,consoleFlattenMessages:!1,clientPrefix:"client.",maxCacheSize:3e3,postSize:1e3,addTime:!0,cacheKeyPrefix:"logs-",postUrl:"/api/metrics",delayPostInMs:6e5,getPingData:void 0,onServerResponse:void 0},o.prototype._init=function(e){var t=this;t.options={};for(var i in o.defaultOptions)o.defaultOptions.hasOwnProperty(i)&&(t.options[i]=e.hasOwnProperty(i)?e[i]:o.defaultOptions[i]);return t.options.logLevel=t._parseLevel(t.options.logLevel),t.options.consoleLevel=t._parseLevel(t.options.consoleLevel),t._sending=!1,t._waiting=null,t._postSize=t.options.postSize,t._initCache(),t},o.prototype._initCache=function(){try{this.cache=new n({maxSize:this.options.maxCacheSize,key:this.options.cacheKeyPrefix+this.userId})}catch(e){this._emitToConsole("warn","MetricsLogger",["Could not intitialize logging cache:",e]),this.options.logLevel=o.NONE}},o.prototype._parseLevel=function(e){var t=void 0===e?"undefined":r(e);if("number"===t)return e;if("string"===t){var i=e.toUpperCase();if(o.hasOwnProperty(i))return o[i]}throw new Error("Unknown log level: "+e)},o.prototype.emit=function(e,t,o){var i=this;return t=t||i.options.defaultNamespace,e&&o?(e=i._parseLevel(e),e>=i.options.logLevel&&i._addToCache(e,t,o),i.consoleLogger&&e>=i.options.consoleLevel&&i._emitToConsole(e,t,o),i):i},o.prototype._addToCache=function(e,t,o){this._emitToConsole("debug","MetricsLogger",["_addToCache:",arguments,this.options.addTime,this.cache.length()]);var i=this;try{i.cache.add(i._buildEntry(e,t,o))>=i._postSize&&i._postCache()}catch(e){i._emitToConsole("warn","MetricsLogger",["Metrics logger could not stringify logArguments:",t,o]),i._emitToConsole("error","MetricsLogger",[e])}return i},o.prototype._buildEntry=function(e,t,o){this._emitToConsole("debug","MetricsLogger",["_buildEntry:",arguments]);var i={level:e,namespace:this.options.clientPrefix+t,args:o};return this.options.addTime&&(i.time=(new Date).toISOString()),i},o.prototype._postCache=function(t){if(t=t||{},this._emitToConsole("info","MetricsLogger",["_postCache",t,this._postSize]),!this.options.postUrl||this._sending)return e.when({});var o=this,i=t.count||o._postSize,n=o.cache.get(i),r=n.length,s="function"==typeof o.options.getPingData?o.options.getPingData():{};return s.metrics=JSON.stringify(n),o._sending=!0,e.post(o.options.postUrl,s).always(function(){o._sending=!1}).fail(function(e,t,i){o._postSize=o.options.maxCacheSize,o.emit("error","MetricsLogger",["_postCache error:",e.readyState,e.status,e.responseJSON||e.responseText])}).done(function(e){"function"==typeof o.options.onServerResponse&&o.options.onServerResponse(e),o.cache.remove(r),o._postSize=o.options.postSize})},o.prototype._delayPost=function(){var e=this;e._waiting=setTimeout(function(){e._waiting=null},e.options.delayPostInMs)},o.prototype._emitToConsole=function(e,t,n){var r=this,s=r.options.consoleNamespaceWhitelist;if(!r.consoleLogger)return r;if(s&&-1===s.indexOf(t))return r;var a=Array.prototype.slice.call(n,0);return a.unshift(t),r.options.consoleFlattenMessages&&(a=[a.map(i).join(" ")]),e>=o.METRIC&&"function"==typeof r.consoleLogger.info?r.consoleLogger.info.apply(r.consoleLogger,a):e>=o.ERROR&&"function"==typeof r.consoleLogger.error?r.consoleLogger.error.apply(r.consoleLogger,a):(e>=o.WARN&&"function"==typeof r.consoleLogger.warn?r.consoleLogger.warn.apply(r.consoleLogger,a):e>=o.INFO&&"function"==typeof r.consoleLogger.info?r.consoleLogger.info.apply(r.consoleLogger,a):e>=o.DEBUG&&"function"==typeof r.consoleLogger.debug?r.consoleLogger.debug.apply(r.consoleLogger,a):"function"==typeof r.consoleLogger.log&&r.consoleLogger.log.apply(r.consoleLogger,a),r)},o.prototype.log=function(){this.emit(1,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},o.prototype.debug=function(){this.emit(o.DEBUG,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},o.prototype.info=function(){this.emit(o.INFO,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},o.prototype.warn=function(){this.emit(o.WARN,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},o.prototype.error=function(){this.emit(o.ERROR,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},o.prototype.metric=function(){this.emit(o.METRIC,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},n.defaultOptions={maxSize:5e3},n.prototype._init=function(e){if(!this._hasStorage())throw new Error("LoggingCache needs localStorage");if(!e.key)throw new Error("LoggingCache needs key for localStorage");return this.key=e.key,this._initStorage(),this.maxSize=e.maxSize||n.defaultOptions.maxSize,this},n.prototype._hasStorage=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}},n.prototype._initStorage=function(){return null===localStorage.getItem(this.key)?this.empty():this},n.prototype.add=function(e){var t=this,o=t._fetchAndParse(),i=o.length+1-t.maxSize;return i>0&&o.splice(0,i),o.push(e),t._unparseAndStore(o),o.length},n.prototype._fetchAndParse=function(){var e=this;return JSON.parse(localStorage.getItem(e.key))},n.prototype._unparseAndStore=function(e){var t=this;return localStorage.setItem(t.key,JSON.stringify(e))},n.prototype.length=function(){return this._fetchAndParse().length},n.prototype.get=function(e){return this._fetchAndParse().slice(0,e)},n.prototype.remove=function(e){var t=this._fetchAndParse(),o=t.splice(0,e);return this._unparseAndStore(t),o},n.prototype.empty=function(){return localStorage.setItem(this.key,"[]"),this},n.prototype.stringify=function(e){return JSON.stringify(this.get(e))},n.prototype.print=function(){console.log(JSON.stringify(this._fetchAndParse(),null,"  "))},t.default={MetricsLogger:o,LoggingCache:n}}).call(t,o(0))},27:function(e,t,o){"use strict";(function(e,i,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=o(34),a=r(s),l=o(23),c=r(l),p=o(8),g=r(p),u=o(4),d=r(u),f=e.View.extend({el:"body",className:"full-content",_panelids:["left","right"],initialize:function(t){var o=this;this.config=i.defaults(t.config||{},{message_box_visible:!1,message_box_content:"",message_box_class:"info",show_inactivity_warning:!1,inactivity_box_content:""}),Galaxy.modal=this.modal=new g.default.View,Galaxy.display=this.display=function(e){e.title?(d.default.setWindowTitle(e.title),e.allow_title_display=!1):(d.default.setWindowTitle(),e.allow_title_display=!0),o.center.display(e)},Galaxy.router=this.router=t.Router&&new t.Router(o,t),this.masthead=new a.default.View(this.config),this.center=new c.default.CenterPanel,this.$el.attr("scroll","no"),this.$el.html(this._template()),this.$("#masthead").replaceWith(this.masthead.$el),this.$("#center").append(this.center.$el),this.$el.append(this.masthead.frame.$el),this.$el.append(this.modal.$el),this.$messagebox=this.$("#messagebox"),this.$inactivebox=this.$("#inactivebox"),this.panels={},i.each(this._panelids,function(e){var i=e.charAt(0).toUpperCase()+e.slice(1),n=t[i];if(n){var r=new n(o,t);o[r.toString()]=r,o.panels[e]=new c.default.SidePanel({id:e,el:o.$("#"+e),view:r})}}),this.render(),this.router&&e.history.start({root:Galaxy.root,pushState:!0})},render:function(){return n(".select2-hidden-accessible").remove(),this.masthead.render(),this.renderMessageBox(),this.renderInactivityBox(),this.renderPanels(),this._checkCommunicationServerOnline(),this},renderMessageBox:function(){if(this.config.message_box_visible){var e=this.config.message_box_content||"",t=this.config.message_box_class||"info";this.$el.addClass("has-message-box"),this.$messagebox.attr("class","panel-"+t+"-message").html(e).toggle(!!e).show()}else this.$el.removeClass("has-message-box"),this.$messagebox.hide();return this},renderInactivityBox:function(){if(this.config.show_inactivity_warning){var e=this.config.inactivity_box_content||"",t=n("<a/>").attr("href",Galaxy.root+"user/resend_verification").text("Resend verification");this.$el.addClass("has-inactivity-box"),this.$inactivebox.html(e+" ").append(t).toggle(!!e).show()}else this.$el.removeClass("has-inactivity-box"),this.$inactivebox.hide();return this},renderPanels:function(){var e=this;return i.each(this._panelids,function(t){var o=e.panels[t];o?o.render():(e.$("#center").css(t,0),e.$("#"+t).hide())}),this},_template:function(){return['<div id="everything">','<div id="background"/>','<div id="masthead"/>','<div id="messagebox"/>','<div id="inactivebox" class="panel-warning-message" />','<div id="left" />','<div id="center" />','<div id="right" />',"</div>",'<div id="dd-helper" />'].join("")},toString:function(){return"PageLayoutView"},_checkCommunicationServerOnline:function(){var e=window.Galaxy.config.communication_server_host,t=window.Galaxy.config.communication_server_port,o=window.Galaxy.user.attributes.preferences,i=n("#show-chat-online");o&&-1!=["1","true"].indexOf(o.communication_server)?n.ajax({url:e+":"+t}).success(function(e){null!==window.Galaxy.user.id&&"hidden"===i.css("visibility")&&i.css("visibility","visible")}).error(function(e){i.css("visibility","hidden")}):i.css("visibility","hidden")}});t.default={View:f}}).call(t,o(2),o(1),o(0))}},[140]);