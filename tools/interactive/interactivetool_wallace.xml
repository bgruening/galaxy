<tool id="interactive_tool_wallace" tool_type="interactive" name="Wallace" version="0.1">
    <description>Webbased Interactive modeling of species niches and distributions</description>
    <requirements>
        <container type="docker">quay.io/bgruening/wilson-app</container>
    </requirements>
    <entry_points>
        <entry_point name="Wallace visualisation of $infile.display_name" requires_domain="True">
            <port>3838</port>
            <url>/sample-apps/SIG/wallace/shiny/</url>
        </entry_point>
    </entry_points>
    <environment_variables>
        <environment_variable name="HISTORY_ID" strip="True">${__app__.security.encode_id($jupyter_notebook.history_id)}</environment_variable> <!-- FIXME: Warning: The use of __app__ is deprecated and will break backward compatibility in the near future -->
        <environment_variable name="REMOTE_HOST">${__app__.config.galaxy_infrastructure_url}</environment_variable> <!-- FIXME: Warning: The use of __app__ is deprecated and will break backward compatibility in the near future -->
        <environment_variable name="GALAXY_WEB_PORT">8080</environment_variable>
        <environment_variable name="GALAXY_URL">${__app__.config.galaxy_infrastructure_url}</environment_variable> <!-- FIXME: Warning: The use of __app__ is deprecated and will break backward compatibility in the near future -->
        <environment_variable name="API_KEY" strip="True">
            #if $__user__:
                #for $api_key in $__user__.api_keys:
                    ${api_key.key}
                    #break
                #end for
            #end if
        </environment_variable> <!-- FIXME: We should have a better way to get user's API key -->
    </environment_variables>
    <command><![CDATA[
        ln -s '${infile}' /srv/shiny-server/data/inputdata.txt &&
        /usr/bin/shiny-server.sh
    ]]>
    </command>
    <inputs>
        <param name="infile" type="data" format="tabular,txt" label="Tabular in Clarion format"/>
    </inputs>
    <outputs>
        <data name="outfile" format="txt" />
    </outputs>
    <tests>
    </tests>
    <help>
<![CDATA[

`Wallace <https://github.molgen.mpg.de/loosolab/wilson-apps/wiki>`_ is a modular platform for reproducible modeling of species niches and distributions.

.. class:: infomark



]]>
    </help>
    <citations>
        <citation type="doi">10.1111/2041-210X.12945</citation>
    </citations>
</tool>
